(()=>{"use strict";var t;!function(t){t[t.PARENT_TO_CHILD=0]="PARENT_TO_CHILD",t[t.PREORDER=1]="PREORDER",t[t.INORDER=2]="INORDER",t[t.POSTORDER=3]="POSTORDER"}(t||(t={}));const e=t;var n=function(t,e,n){if(n||2===arguments.length)for(var o,r=0,i=e.length;r<i;r++)!o&&r in e||(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))};const o=function(){function t(t){this.left=null,this.right=null,this.height=1,this.value=t}return t.prototype.getCalculatedHeight=function(){var t=null!=this.left?this.left.getCalculatedHeight():0,e=null!=this.right?this.right.getCalculatedHeight():0;return Math.max(t,e)+1},t.prototype.getCalculatedBalance=function(){return(null!=this.left?this.left.getCalculatedHeight():0)-(null!=this.right?this.right.getCalculatedHeight():0)},t.prototype.getTraversal=function(t){switch(t){case e.PREORDER:return this.getPreorderTraversal();case e.INORDER:return this.getInorderTraversal();case e.POSTORDER:return this.getPostorderTraversal();case e.PARENT_TO_CHILD:throw new Error("Cannot get traversal for parent to child");default:throw new Error("Invalid arrow direction")}},t.prototype.getPreorderTraversal=function(){var t=null!=this.left?this.left.getPreorderTraversal():[],e=null!=this.right?this.right.getPreorderTraversal():[];return n(n([this],t,!0),e,!0)},t.prototype.getInorderTraversal=function(){var t=null!=this.left?this.left.getInorderTraversal():[],e=null!=this.right?this.right.getInorderTraversal():[];return n(n(n([],t,!0),[this],!1),e,!0)},t.prototype.getPostorderTraversal=function(){var t=null!=this.left?this.left.getPostorderTraversal():[],e=null!=this.right?this.right.getPostorderTraversal():[];return n(n(n([],t,!0),e,!0),[this],!1)},t}();function r(t,e){if(!t)throw new Error(e)}var i,a=function(){function t(t){this.arrowDirection=e.PARENT_TO_CHILD,this.root=null,this.controller=t}return t.prototype.getArrows=function(){if(null==this.root)return new Set;var t=new Set;if(this.arrowDirection===e.PARENT_TO_CHILD)this.root.getTraversal(e.INORDER).forEach((function(e){null!=e.left&&t.add([e,e.left]),null!=e.right&&t.add([e,e.right])}));else for(var n=this.root.getTraversal(this.arrowDirection),o=0;o<n.length-1;o++){var r=n[o],i=n[o+1];t.add([r,i])}return t},t.prototype.getPropertiesOfNode=function(t){return{height:t.getCalculatedHeight(),balance:t.getCalculatedBalance(),leftHeight:null!=t.left?t.left.getCalculatedHeight():0,rightHeight:null!=t.right?t.right.getCalculatedHeight():0}},t.prototype.getShape=function(){return null==this.root?{inorderTraversal:[],layers:[],arrows:new Set}:{inorderTraversal:this.root.getTraversal(e.INORDER),layers:this.getLayers(),arrows:this.getArrows()}},t.prototype.getLayers=function(){if(null==this.root)return[];for(var t=[],e=[this.root];e.length>0;){for(var n=e.length,o=[],i=0;i<n;i++){var a=e.shift();r(void 0!==a,"Node is undefined"),o.push(a),null!=a.left&&e.push(a.left),null!=a.right&&e.push(a.right)}t.push(o)}return t},t}(),s=(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});const u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.findSuccessorAndParentAndPath=function(t){r(null!==t.left&&null!==t.right,"Node does not have 2 children");for(var e=t.right,n=t,o=[];null!==e.left;)o.push({node:e,secondaryDescription:{type:"successor",direction:"left"}}),n=e,e=e.left;return o.push({node:e,secondaryDescription:{type:"successor",direction:"stop"}}),{successor:e,successorParent:n,pathToSuccessor:o}},e.prototype.insert=function(t){if(null==this.root)return this.root=new o(t),{insertionInformation:{shape:this.getShape(),pathFromRootToTarget:[],value:this.root.value},insertedNode:this.root};for(var e=[],n=this.root;null!=n;)t<n.value?(e.push({node:n,secondaryDescription:{type:"insert",direction:"left",targetValue:t,nodeValue:n.value}}),n=n.left):(e.push({node:n,secondaryDescription:{type:"insert",direction:"right",targetValue:t,nodeValue:n.value}}),n=n.right);var r=e[e.length-1].node,i=new o(t);return t<r.value?r.left=i:r.right=i,{insertionInformation:{shape:this.getShape(),pathFromRootToTarget:e,value:i.value},insertedNode:i}},e.prototype.delete=function(t){var n;if(null==this.root)return{type:"VictimNotFound",pathFromRootToTarget:[]};for(var o=[],r=this.root,i=null;null!=r&&r.value!==t;)i=r,t<r.value?(o.push({node:r,secondaryDescription:{type:"find",direction:"left",targetValue:t,nodeValue:r.value}}),r=r.left):(o.push({node:r,secondaryDescription:{type:"find",direction:"right",targetValue:t,nodeValue:r.value}}),r=r.right);if(null==r)return{type:"VictimNotFound",pathFromRootToTarget:o};if(o.push({node:r,secondaryDescription:{type:"find",direction:"stop",targetValue:t,nodeValue:r.value}}),null===r.left||null===r.right){var a=null!==(n=r.left)&&void 0!==n?n:r.right;return null===i?this.root=a:i.left===r?i.left=a:i.right=a,{type:"LEQ1Child",shape:this.getShape(),pathFromRootToTarget:o,victimNode:r}}var s=e.findSuccessorAndParentAndPath(r),u=s.successor,l=s.successorParent,h=s.pathToSuccessor;return r.value=u.value,l.left===u?l.left=u.right:l.right=u.right,{type:"2Children",shape:this.getShape(),pathFromRootToTarget:o,victimNode:r,pathFromTargetsRightChildToSuccessor:h,successorNode:u}},e.prototype.find=function(t){for(var e=[],n=this.root;null!=n&&n.value!==t;)t<n.value?(e.push({node:n,secondaryDescription:{type:"find",direction:"left",targetValue:t,nodeValue:n.value}}),n=n.left):(e.push({node:n,secondaryDescription:{type:"find",direction:"right",targetValue:t,nodeValue:n.value}}),n=n.right);return null!=n&&e.push({node:n,secondaryDescription:{type:"find",direction:"stop",targetValue:t,nodeValue:n.value}}),{pathFromRootToTarget:e,nodeFound:n}},e}(a);var l=function(){function t(e){this.shape={inorderTraversal:[],layers:[],arrows:new Set},this.functionQueue=[],this.functionAtFrontOfQueueWasCalled=!1,this.description="",this.secondaryDescription=void 0,this.currentAnimationId=-1,this.animationSpeed=1,this.animationSpeedSetting=t.DEFAULT_ANIMATION_SPEED_SETTING,this.lastRenderTimeMs=performance.now(),this.controller=e}return t.makePlaceholderNode=function(){return new c(NaN,NaN,t.FILL_COLOR,t.STROKE_COLOR,NaN)},t.centerTree=function(e){t.ROOT_TARGET_X=e/2},t.getDisableableElements=function(){var t=document.getElementById("insert"),e=document.getElementById("delete"),n=document.getElementById("find"),o=document.getElementById("clearButton"),i=document.getElementById("arrowButton");return r(null!==t&&null!==e&&null!==n&&null!==o&&null!==i,"insertDiv, deleteDiv, findDiv, clearButton, or arrowButton not found"),[t,e,n,o,i]},t.disableElements=function(t){t.forEach((function(t){t.classList.add("disabled")}))},t.enableElements=function(t){t.forEach((function(t){t.classList.remove("disabled")}))},t.drawArrow=function(e,n,o,r,i){var a=o-e,s=r-n,u=Math.atan2(s,a);i.beginPath(),i.lineWidth=t.ARROW_LINE_WIDTH,i.moveTo(e,n),i.lineTo(o,r),i.lineTo(o-t.ARROW_HEAD_LENGTH*Math.cos(u-t.ARROW_HEAD_ANGLE),r-t.ARROW_HEAD_LENGTH*Math.sin(u-t.ARROW_HEAD_ANGLE)),i.moveTo(o,r),i.lineTo(o-t.ARROW_HEAD_LENGTH*Math.cos(u+t.ARROW_HEAD_ANGLE),r-t.ARROW_HEAD_LENGTH*Math.sin(u+t.ARROW_HEAD_ANGLE)),i.stroke()},t.drawArrowFromNodeToNode=function(e,n,o){var r=n.x-e.x,i=n.y-e.y,a=Math.hypot(r,i),s=r*n.currentRadius/a,u=i*n.currentRadius/a;t.drawArrow(e.x,e.y,n.x-s,n.y-u,o)},t.prototype.setTargetPositions=function(){if(0!==this.shape.inorderTraversal.length)for(var t=this.getTargetXs(),e=this.getTargetYs(),n=0,o=this.shape.inorderTraversal;n<o.length;n++){var i=o[n],a=t.get(i);r(void 0!==a,"TargetX is undefined");var s=e.get(i);r(void 0!==s,"TargetY is undefined"),i.moveTo(a,s)}},t.prototype.setAnimationSpeedSetting=function(e){this.animationSpeedSetting=e,this.animationSpeed=199===e?1/0:Math.pow(1.03,e-t.DEFAULT_ANIMATION_SPEED_SETTING)},t.prototype.getAnimationSpeedSetting=function(){return this.animationSpeedSetting},t.prototype.setArrows=function(t){this.shape.arrows=t},t.prototype.animate=function(e,n){var o=this,r=performance.now(),i=r-this.lastRenderTimeMs;if(i>=t.TIME_BETWEEN_RENDERS_MS){this.render(e,n),this.lastRenderTimeMs=r;var a=i*this.animationSpeed;this.updateFunctionQueue(a),this.shape.inorderTraversal.forEach((function(t){t.update(a)}))}this.currentAnimationId=requestAnimationFrame((function(){o.animate(e,n)}))},t.prototype.stopAnimation=function(){cancelAnimationFrame(this.currentAnimationId)},t.prototype.handleHover=function(t,e){var n=this.shape.inorderTraversal.find((function(n){return n.containsPoint(t,e)})),o=document.getElementById("nodePopup");if(r(null!==o,"nodePopup not found"),this.shape.inorderTraversal.forEach((function(t){t.unThickHighlight()})),void 0!==n){n.thickHighlightIndefinitely();var i=this.controller.getPropertiesOfNode(n),a=i.height,s=i.balance,u=i.leftHeight,l=i.rightHeight;o.innerHTML="Value: ".concat(n.value," <br>")+"Height: ".concat(a," <br>")+"Balance factor: ".concat(s," <br>")+"Height of left subtree: ".concat(u," <br>")+"Height of right subtree: ".concat(l," <br>")}else o.innerHTML="Hover over a node to see its properties."},t.prototype.animateShapeChange=function(t){this.shape=t,this.setTargetPositions()},t.prototype.updateFunctionQueue=function(t){for(;this.functionQueue.length>0&&this.functionQueue[0].timeToWaitMs<=0;)if(this.functionAtFrontOfQueueWasCalled)this.functionAtFrontOfQueueWasCalled=!1,this.functionQueue.shift();else{var e=this.functionQueue[0],n=e.func,o=e.timeAfterCallMs,r=e.description,i=e.secondaryDescription;n(),this.description=r,this.secondaryDescription=i,o>0?(this.functionAtFrontOfQueueWasCalled=!0,this.functionQueue[0].timeToWaitMs=o):this.functionQueue.shift()}this.functionQueue.length>0&&(this.functionQueue[0].timeToWaitMs-=t)},t.prototype.render=function(e,n){n.clearRect(0,0,e.width,e.height),this.shape.arrows.forEach((function(e){t.drawArrowFromNodeToNode(e[0],e[1],n)})),this.shape.inorderTraversal.forEach((function(t){t.draw(n)}));var o=document.getElementById("animationDescription");r(null!==o,"animationDescription not found"),o.textContent=this.description;var i=document.getElementById("secondaryAnimationDescription");r(null!==i,"secondaryAnimationDescription not found"),null==this.secondaryDescription?i.textContent="":i.textContent=this.secondaryDescription,0===this.functionQueue.length?t.enableElements(t.getDisableableElements()):t.disableElements(t.getDisableableElements())},t.prototype.getTargetXs=function(){for(var e=new Map,n=this.shape.layers[0][0],o=this.shape.inorderTraversal.indexOf(n),r=0;r<this.shape.inorderTraversal.length;r++){var i=this.shape.inorderTraversal[r];e.set(i,t.ROOT_TARGET_X+(r-o)*t.TARGET_X_GAP)}return e},t.prototype.getTargetYs=function(){for(var e=new Map,n=0;n<this.shape.layers.length;n++)for(var o=this.shape.layers[n],r=t.ROOT_TARGET_Y+n*t.TARGET_Y_GAP,i=0,a=o;i<a.length;i++){var s=a[i];e.set(s,r)}return e},t.DURATION_MULTIPLIER=.6,t.ROOT_TARGET_X=700,t.ROOT_TARGET_Y=150,t.TARGET_X_GAP=50,t.TARGET_Y_GAP=75,t.FILL_COLOR="pink",t.STROKE_COLOR="red",t.ARROW_HEAD_ANGLE=Math.PI/6,t.ARROW_HEAD_LENGTH=10,t.ARROW_LINE_WIDTH=2,t.DEFAULT_ANIMATION_SPEED_SETTING=100,t.TIME_BETWEEN_RENDERS_MS=1e3/120,t}();const h=l,c=function(){function t(t,e,n,o,r){this.currentRadius=0,this.thickHighlightColor=null,this.timeSinceStartedMovingMs=0,this.timeSinceStartedGrowingMs=0,this.timeUntilShrunkMs=-1,this.x=t,this.y=e,this.previousX=t,this.previousY=e,this.targetX=t,this.targetY=e,this.fillColor=n,this.strokeColor=o,this.value=r}return t.easeInOutCurve=function(t){return t*t*(3-2*t)},t.bounceCurve=function(e){return e<.6?t.easeInOutCurve(e)/.648:1+Math.sin(7.5*Math.PI*(e-.6))/Math.exp(4*e)},t.getDampingCurve=function(t,e,n,o){return function(r){return r===1/0?1:1-t*Math.exp(-e*r)*Math.cos(n*r+o)}},t.strongDampingCurve=function(e){return t.getDampingCurve(1.04,.5,1.9,-.3)(e)},t.weakDampingCurve=function(e){return t.getDampingCurve(1.13,1,2.07,-.5)(e)},t.motionCurve=function(e){return r(e>=0,"progress must be nonnegative"),t.strongDampingCurve(e)},t.radiusGrowthCurve=function(e){return r(e>=0,"progress must be nonnegative"),t.weakDampingCurve(e)},t.radiusShrinkingCurve=function(e){return r(e>=0&&e<=1,"progress must be between 0 and 1"),1-t.easeInOutCurve(e)},t.prototype.moveTo=function(t,e){this.timeSinceStartedMovingMs=0,this.previousX=this.x,this.previousY=this.y,this.targetX=t,this.targetY=e},t.prototype.highlight=function(e,n){void 0===e&&(e=t.DEFAULT_HIGHLIGHT_COLOR),void 0===n&&(n=t.DEFAULT_HIGHLIGHT_DURATION_MS),this.highlightColor=e,this.timeUntilUnhighlightedMs=n},t.prototype.thickHighlightIndefinitely=function(e){void 0===e&&(e=t.DEFAULT_THICK_HIGHLIGHT_COLOR),this.thickHighlightColor=e},t.prototype.unThickHighlight=function(){this.thickHighlightColor=null},t.prototype.unhighlight=function(){this.timeUntilUnhighlightedMs=0},t.prototype.startShrinkingIntoNothing=function(){this.timeUntilShrunkMs=t.SHRINK_DURATION_MS},t.prototype.containsPoint=function(t,e){return Math.hypot(this.x-t,this.y-e)<=this.currentRadius},t.prototype.update=function(e){this.timeSinceStartedMovingMs+=e,this.timeSinceStartedGrowingMs+=e,this.timeUntilUnhighlightedMs=Math.max(this.timeUntilUnhighlightedMs-e,0),-1!==this.timeUntilShrunkMs&&(this.timeUntilShrunkMs=Math.max(this.timeUntilShrunkMs-e,0));var n=this.timeSinceStartedMovingMs/t.MOVE_DURATION_MS;if(this.x=this.previousX+(this.targetX-this.previousX)*t.motionCurve(n),this.y=this.previousY+(this.targetY-this.previousY)*t.motionCurve(n),this.timeUntilShrunkMs>=0){var o=(t.SHRINK_DURATION_MS-this.timeUntilShrunkMs)/t.SHRINK_DURATION_MS;this.currentRadius=t.MAX_RADIUS*t.radiusShrinkingCurve(o)}else{var r=this.timeSinceStartedGrowingMs/t.GROW_DURATION_MS;this.currentRadius=t.MAX_RADIUS*t.radiusGrowthCurve(r)}},t.prototype.draw=function(e){null!==this.thickHighlightColor&&(e.beginPath(),e.arc(this.x,this.y,this.currentRadius+2*t.HIGHLIGHT_WIDTH,0,2*Math.PI),e.fillStyle=this.thickHighlightColor,e.fill()),this.timeUntilUnhighlightedMs>0&&(e.beginPath(),e.arc(this.x,this.y,this.currentRadius+t.HIGHLIGHT_WIDTH,0,2*Math.PI),e.fillStyle=this.highlightColor,e.fill()),e.beginPath(),e.arc(this.x,this.y,this.currentRadius,0,2*Math.PI),e.fillStyle=this.fillColor,e.fill(),e.lineWidth=t.BORDER_WIDTH,e.strokeStyle=this.strokeColor,e.stroke(),this.currentRadius>=t.MIN_RADIUS_TO_DRAW_TEXT&&(e.fillStyle=t.TEXT_COLOR,e.textAlign="center",e.textBaseline="middle",e.font=t.TEXT_FONT,e.fillText(this.value.toString(),this.x,this.y+t.TEXT_Y_OFFSET))},t.MOVE_DURATION_MS=1e3*h.DURATION_MULTIPLIER,t.SHRINK_DURATION_MS=1e3*h.DURATION_MULTIPLIER,t.DEFAULT_HIGHLIGHT_DURATION_MS=1e3*h.DURATION_MULTIPLIER,t.GROW_DURATION_MS=1e3*h.DURATION_MULTIPLIER,t.BORDER_WIDTH=1,t.HIGHLIGHT_WIDTH=5,t.TEXT_COLOR="red",t.TEXT_FONT="16px Arial",t.TEXT_Y_OFFSET=2,t.MIN_RADIUS_TO_DRAW_TEXT=10,t.DEFAULT_HIGHLIGHT_COLOR="blue",t.DEFAULT_THICK_HIGHLIGHT_COLOR="gold",t.MAX_RADIUS=30,t}();var p=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return p(e,t),e.prototype.insert=function(t){var n=this,o=t.shape,i=t.pathFromRootToTarget,a=t.value,s=o.inorderTraversal.find((function(t){return isNaN(t.x)}));if(r(null!=s,"Placeholder node not found"),0===this.shape.inorderTraversal.length)return s.value=a,s.x=h.ROOT_TARGET_X,s.y=h.ROOT_TARGET_Y,void this.animateShapeChange(o);this.pushNodeHighlightingOntoFunctionQueue(i,e.INSERTION_DESCRIPTIONS.FIND_WHERE_TO_INSERT),this.functionQueue.push({timeToWaitMs:0,func:function(){n.setupInsertionAnimation(a,o,s,i[i.length-1].node)},timeAfterCallMs:c.MOVE_DURATION_MS,description:e.INSERTION_DESCRIPTIONS.INSERT_NEW_NODE})},e.prototype.delete=function(t){var n=this;switch(t.type){case"LEQ1Child":var o=t.shape,r=t.pathFromRootToTarget,i=t.victimNode;this.pushNodeHighlightingOntoFunctionQueue(r,e.DELETION_DESCRIPTIONS.FIND_NODE_TO_DELETE),this.functionQueue.push({timeToWaitMs:0,func:function(){i.startShrinkingIntoNothing()},timeAfterCallMs:c.SHRINK_DURATION_MS,description:e.DELETION_DESCRIPTIONS.DELETE_NODE}),this.functionQueue.push({timeToWaitMs:0,func:function(){n.animateShapeChange(o)},timeAfterCallMs:c.SHRINK_DURATION_MS,description:e.DELETION_DESCRIPTIONS.DELETE_NODE});break;case"2Children":var a=t.shape,s=(r=t.pathFromRootToTarget,t.victimNode),u=t.pathFromTargetsRightChildToSuccessor,l=t.successorNode;this.pushNodeHighlightingOntoFunctionQueue(r,e.DELETION_DESCRIPTIONS.FIND_NODE_TO_DELETE),this.functionQueue.push({timeToWaitMs:0,func:function(){s.highlight(e.FIND_SUCCESSOR_HIGHLIGHT_COLOR,1/0)},timeAfterCallMs:0,description:e.DELETION_DESCRIPTIONS.FIND_SUCCESSOR}),this.pushNodeHighlightingOntoFunctionQueue(u,e.DELETION_DESCRIPTIONS.FIND_SUCCESSOR,e.FIND_SUCCESSOR_HIGHLIGHT_COLOR),this.functionQueue.push({timeToWaitMs:0,func:function(){l.highlight(e.FIND_SUCCESSOR_HIGHLIGHT_COLOR,1/0)},timeAfterCallMs:0,description:e.DELETION_DESCRIPTIONS.REPLACE_NODE_WITH_SUCCESSOR}),this.functionQueue.push({timeToWaitMs:e.TIME_BEFORE_REPLACE_WITH_SUCCESSOR_MS,func:function(){s.value=l.value},timeAfterCallMs:0,description:e.DELETION_DESCRIPTIONS.REPLACE_NODE_WITH_SUCCESSOR}),this.functionQueue.push({timeToWaitMs:e.TIME_BEFORE_UNHIGHLIGHT_VICTIM_MS,func:function(){s.unhighlight(),l.unhighlight()},timeAfterCallMs:e.TIME_AFTER_HIGHLIGHTING_VICTIM_WITH_TWO_CHILDREN_MS,description:e.DELETION_DESCRIPTIONS.REPLACE_NODE_WITH_SUCCESSOR}),this.functionQueue.push({timeToWaitMs:0,func:function(){l.startShrinkingIntoNothing()},timeAfterCallMs:c.SHRINK_DURATION_MS,description:e.DELETION_DESCRIPTIONS.DELETE_SUCCESSOR}),this.functionQueue.push({timeToWaitMs:0,func:function(){n.animateShapeChange(a)},timeAfterCallMs:c.MOVE_DURATION_MS,description:e.DELETION_DESCRIPTIONS.DELETE_SUCCESSOR});break;case"VictimNotFound":0!==(r=t.pathFromRootToTarget).length&&this.pushNodeHighlightingOntoFunctionQueue(r,e.DELETION_DESCRIPTIONS.FIND_NODE_TO_DELETE),this.functionQueue.push({timeToWaitMs:e.TIME_AFTER_UNSUCCESSFUL_DELETE_MS,func:function(){},timeAfterCallMs:0,description:e.DELETION_DESCRIPTIONS.DID_NOT_FIND_NODE})}},e.prototype.find=function(t){var n=t.pathFromRootToTarget,o=t.nodeFound;0!==n.length&&this.pushNodeHighlightingOntoFunctionQueue(n,e.FIND_DESCRIPTIONS.FIND_NODE),null!=o?this.functionQueue.push({timeToWaitMs:0,func:function(){o.highlight(e.HIGHLIGHT_COLOR_AFTER_SUCCESSFUL_FIND,e.HIGHLIGHT_DURATION_AFTER_SUCCESSFUL_FIND_MS)},timeAfterCallMs:e.HIGHLIGHT_DURATION_AFTER_SUCCESSFUL_FIND_MS+e.TIME_AFTER_FIND_MS,description:e.FIND_DESCRIPTIONS.FOUND_NODE}):this.functionQueue.push({timeToWaitMs:0,func:function(){},timeAfterCallMs:e.TIME_AFTER_FIND_MS,description:e.FIND_DESCRIPTIONS.DID_NOT_FIND_NODE})},e.prototype.convertSecondaryDescriptionToString=function(t){switch(t.type){case"insert":switch(t.direction){case"left":return"Go left because ".concat(t.targetValue," < ").concat(t.nodeValue);case"right":return"Go right because ".concat(t.targetValue," >= ").concat(t.nodeValue)}break;case"find":switch(t.direction){case"left":return"Go left because ".concat(t.targetValue," < ").concat(t.nodeValue);case"right":return"Go right because ".concat(t.targetValue," > ").concat(t.nodeValue);case"stop":return"Stop because ".concat(t.targetValue," = ").concat(t.nodeValue)}break;case"successor":switch(t.direction){case"left":return"Go left because there is a left child";case"stop":return"Stop because there is no left child"}}},e.prototype.setupInsertionAnimation=function(t,e,n,o){n.value=t,n.value<o.value?n.x=o.x-h.TARGET_X_GAP:n.x=o.x+h.TARGET_X_GAP,n.y=o.y+h.TARGET_Y_GAP,this.animateShapeChange(e)},e.prototype.pushNodeHighlightingOntoFunctionQueue=function(t,n,o){for(var r=function(t,r){i.functionQueue.push({timeToWaitMs:e.TIME_BETWEEN_HIGHLIGHTS_MS,func:function(){t.highlight(o)},timeAfterCallMs:c.DEFAULT_HIGHLIGHT_DURATION_MS,description:n,secondaryDescription:i.convertSecondaryDescriptionToString(r)})},i=this,a=0,s=t;a<s.length;a++){var u=s[a];r(u.node,u.secondaryDescription)}},e.TIME_BETWEEN_HIGHLIGHTS_MS=1e3*h.DURATION_MULTIPLIER,e.TIME_AFTER_HIGHLIGHTING_VICTIM_WITH_TWO_CHILDREN_MS=1e3*h.DURATION_MULTIPLIER,e.TIME_BEFORE_REPLACE_WITH_SUCCESSOR_MS=1e3*h.DURATION_MULTIPLIER,e.TIME_BEFORE_UNHIGHLIGHT_VICTIM_MS=1e3*h.DURATION_MULTIPLIER,e.TIME_AFTER_UNSUCCESSFUL_DELETE_MS=1e3*h.DURATION_MULTIPLIER,e.HIGHLIGHT_DURATION_AFTER_SUCCESSFUL_FIND_MS=1e3*h.DURATION_MULTIPLIER,e.TIME_AFTER_FIND_MS=0*h.DURATION_MULTIPLIER,e.FIND_SUCCESSOR_HIGHLIGHT_COLOR="green",e.HIGHLIGHT_COLOR_AFTER_SUCCESSFUL_FIND="green",e.INSERTION_DESCRIPTIONS={FIND_WHERE_TO_INSERT:"Find where to insert the new node.",INSERT_NEW_NODE:"Insert the new node."},e.DELETION_DESCRIPTIONS={FIND_NODE_TO_DELETE:"Find the node to delete.",DELETE_NODE:"Delete the node.",FIND_SUCCESSOR:"Find the successor of the node to set the node's value to.",REPLACE_NODE_WITH_SUCCESSOR:"Replace the node's value with its successor.",DELETE_SUCCESSOR:"Delete the successor node.",DID_NOT_FIND_NODE:"Did not find the node."},e.FIND_DESCRIPTIONS={FIND_NODE:"Find the node.",FOUND_NODE:"Found the node.",DID_NOT_FIND_NODE:"Did not find the node."},e}(h);var f=function(){function t(){this.dataNodeToDisplayNode=new Map}return t.centerTree=function(t){h.centerTree(t)},t.prototype.setAnimationSpeedSetting=function(t){this.view.setAnimationSpeedSetting(t)},t.prototype.getAnimationSpeedSetting=function(){return this.view.getAnimationSpeedSetting()},t.prototype.animate=function(){var t=document.getElementById("canvas"),e=t.getContext("2d");r(null!==e,"context is null"),this.view.animate(t,e)},t.prototype.stopAnimation=function(){this.view.stopAnimation()},t.prototype.handleHover=function(t,e){this.view.handleHover(t,e)},t.prototype.getPropertiesOfNode=function(t){return this.model.getPropertiesOfNode(this.reverseTranslateNode(t))},t.prototype.translateNode=function(t){var e=this.dataNodeToDisplayNode.get(t);return r(void 0!==e,"dataNode not found in map"),e},t.prototype.reverseTranslateNode=function(t){var e;if(this.dataNodeToDisplayNode.forEach((function(n,o){n===t&&(e=o)})),void 0===e)throw new Error("displayNode not found in map");return e},t.prototype.translateShape=function(t){var e=t.inorderTraversal,n=t.layers,o=t.arrows;return{inorderTraversal:this.translateArray(e),layers:this.translateLayers(n),arrows:this.translateArrows(o)}},t.prototype.translateArray=function(t){var e=this;return t.map((function(t){return e.translateNode(t)}))},t.prototype.translateLayers=function(t){var e=this;return t.map((function(t){return e.translateArray(t)}))},t.prototype.translateArrows=function(t){var e=this;return new Set(Array.from(t).map((function(t){return e.translateArray(t)})))},t}();const T=f;var g=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const _=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.model=new u(e),e.view=new d(e),e}return g(e,t),e.prototype.setArrowDirection=function(t){this.model.arrowDirection=t,this.view.setArrows(this.translateArrows(this.model.getArrows()))},e.prototype.getArrowDirection=function(){return this.model.arrowDirection},e.prototype.insert=function(t){var e=this.model.insert(t),n=e.insertionInformation,o=e.insertedNode,r=h.makePlaceholderNode();this.dataNodeToDisplayNode.set(o,r),this.view.insert(this.translateInsertionInformation(n))},e.prototype.delete=function(t){var e=this.model.delete(t);this.view.delete(this.translateDeletionInformation(e))},e.prototype.find=function(t){var e=this.model.find(t);this.view.find(this.translateFindInformation(e))},e.prototype.translateInsertionInformation=function(t){var e=t.shape,n=t.pathFromRootToTarget,o=t.value;return{shape:this.translateShape(e),pathFromRootToTarget:this.translatePath(n),value:o}},e.prototype.translateDeletionInformation=function(t){switch(t.type){case"LEQ1Child":var e=t.shape,n=t.pathFromRootToTarget,o=t.victimNode;return{type:"LEQ1Child",shape:this.translateShape(e),pathFromRootToTarget:this.translatePath(n),victimNode:this.translateNode(o)};case"2Children":e=t.shape,n=t.pathFromRootToTarget,o=t.victimNode;var r=t.pathFromTargetsRightChildToSuccessor,i=t.successorNode;return{type:"2Children",shape:this.translateShape(e),pathFromRootToTarget:this.translatePath(n),victimNode:this.translateNode(o),pathFromTargetsRightChildToSuccessor:this.translatePath(r),successorNode:this.translateNode(i)};case"VictimNotFound":return n=t.pathFromRootToTarget,{type:"VictimNotFound",pathFromRootToTarget:this.translatePath(n)}}},e.prototype.translateFindInformation=function(t){var e=t.pathFromRootToTarget,n=t.nodeFound;return{pathFromRootToTarget:this.translatePath(e),nodeFound:null!==n?this.translateNode(n):null}},e.prototype.translatePath=function(t){var e=this;return t.map((function(t){var n=t.node,o=t.secondaryDescription;return{node:e.translateNode(n),secondaryDescription:o}}))},e}(T);var I=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),E=function(){return E=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},E.apply(this,arguments)};const R=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return I(e,t),e.getHeight=function(t){return null===t?0:t.height},e.updateHeight=function(t){t.height=Math.max(e.getHeight(t.left),e.getHeight(t.right))+1},e.getBalance=function(t){return null===t?0:e.getHeight(t.left)-e.getHeight(t.right)},e.rotateRight=function(t){r(null!==t.left,"y.left is null");var n=t.left,o=n.right;return n.right=t,t.left=o,e.updateHeight(t),e.updateHeight(n),n},e.rotateLeft=function(t){r(null!==t.right,"x.right is null");var n=t.right,o=n.left;return n.left=t,t.right=o,e.updateHeight(t),e.updateHeight(n),n},e.prototype.insert=function(e){var n=t.prototype.insert.call(this,e),o=n.insertionInformation,r=n.insertedNode,i=o.pathFromRootToTarget,a=this.rebalanceAlongPath(i.map((function(t){return t.node})));return{insertionInformation:E(E({},o),{rotationPath:a}),insertedNode:r}},e.prototype.delete=function(e){var n,o=t.prototype.delete.call(this,e),r=o.pathFromRootToTarget;if("2Children"===o.type){var i=o.pathFromTargetsRightChildToSuccessor,a=r.map((function(t){return t.node})).concat(i.map((function(t){return t.node})));n=this.rebalanceAlongPath(a)}else n=this.rebalanceAlongPath(r.map((function(t){return t.node})));return E(E({},o),{rotationPath:n})},e.prototype.rebalanceAlongPath=function(t){for(var n=[];t.length>0;){var o=t.pop();r(void 0!==o,"ancestor is undefined"),n.push(this.rebalance(o,0===t.length?null:t[t.length-1])),e.updateHeight(o)}return n},e.prototype.rebalance=function(t,n){var o=e.getBalance(t),i=[];return o>1?(e.getBalance(t.left)>=0||(r(null!==t.left,"node.left is null"),this.handleRotation(i,t.left,t,"left")),this.handleRotation(i,t,n,"right")):o<-1&&(e.getBalance(t.right)<=0||(r(null!==t.right,"node.right is null"),this.handleRotation(i,t.right,t,"right")),this.handleRotation(i,t,n,"left")),{node:t,shapesAfterRotation:i,secondaryDescription:{type:"rotation",leftHeight:e.getHeight(t.left),rightHeight:e.getHeight(t.right),newBalanceFactor:o,newHeight:e.getHeight(t)}}},e.prototype.handleRotation=function(t,n,o,r){var i=null===o?"root":o.left===n?"left":"right";n="left"===r?e.rotateLeft(n):e.rotateRight(n),this.attach(n,o,i),t.push(this.getShape())},e.prototype.attach=function(t,e,n){switch(n){case"left":r(null!==e,"parent is null"),e.left=t;break;case"right":r(null!==e,"parent is null"),e.right=t;break;case"root":this.root=t}},e}(u);var O=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const S=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return O(e,t),e.convertRotationSecondaryDescriptionToString=function(t){var e=t.leftHeight,n=t.rightHeight,o=t.newHeight,r=t.newBalanceFactor,i="";return(i+="The node's height is Max(".concat(e,", ").concat(n,") + 1 = ").concat(o,". The node's balance factor is ").concat(e," - ").concat(n," = ").concat(r,". "))+(r<-1?"Rotate because balance factor < -1.":r>1?"Rotate because balance factor > 1.":"Do not rotate because balance factor is between -1 and 1.")},e.prototype.insert=function(e){t.prototype.insert.call(this,e),this.pushRotationPathOntoFunctionQueue(e.rotationPath)},e.prototype.delete=function(e){t.prototype.delete.call(this,e),this.pushRotationPathOntoFunctionQueue(e.rotationPath)},e.prototype.pushRotationPathOntoFunctionQueue=function(t){for(var n=this,o=function(t,o){n.functionQueue.push({timeToWaitMs:0,func:function(){n.animateShapeChange(t)},timeAfterCallMs:c.MOVE_DURATION_MS+e.TIME_AFTER_ROTATION_MS,description:e.ROTATION_PATH_DESCRIPTION,secondaryDescription:o})},r=function(t){var n=t.node,r=t.shapesAfterRotation,a=t.secondaryDescription;i.functionQueue.push({timeToWaitMs:d.TIME_BETWEEN_HIGHLIGHTS_MS,func:function(){n.highlight(e.ROTATION_PATH_HIGHLIGHT_COLOR,e.ROTATION_PATH_HIGHLIGHT_DURATION_MS)},timeAfterCallMs:e.ROTATION_PATH_HIGHLIGHT_DURATION_MS,description:e.ROTATION_PATH_DESCRIPTION,secondaryDescription:e.convertRotationSecondaryDescriptionToString(a)}),1===r.length?o(r[0],"Rotation"):2===r.length&&(o(r[0],"First rotation"),o(r[1],"Second rotation"))},i=this,a=0,s=t;a<s.length;a++)r(s[a])},e.TIME_AFTER_ROTATION_MS=1e3*h.DURATION_MULTIPLIER,e.ROTATION_PATH_HIGHLIGHT_DURATION_MS=2e3*h.DURATION_MULTIPLIER,e.ROTATION_PATH_HIGHLIGHT_COLOR="red",e.ROTATION_PATH_DESCRIPTION="Go back up the tree, rotating nodes as necessary to maintain the AVL property.",e}(d);var v=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),N=function(){return N=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},N.apply(this,arguments)};const y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.model=new R(e),e.view=new S(e),e}return v(e,t),e.prototype.translateInsertionInformation=function(e){var n=t.prototype.translateInsertionInformation.call(this,e),o=this.translateRotationPath(e.rotationPath);return N(N({},n),{rotationPath:o})},e.prototype.translateDeletionInformation=function(e){var n=t.prototype.translateDeletionInformation.call(this,e),o=this.translateRotationPath(e.rotationPath);return N(N({},n),{rotationPath:o})},e.prototype.translateRotationPath=function(t){var e=this;return t.map((function(t){return e.translateRotationPathInstruction(t)}))},e.prototype.translateRotationPathInstruction=function(t){var e=t.node,n=t.shapesAfterRotation,o=t.secondaryDescription;return{node:this.translateNode(e),shapesAfterRotation:this.translateShapesAfterRotation(n),secondaryDescription:o}},e.prototype.translateShapesAfterRotation=function(t){var e=this;return t.map((function(t){return e.translateShape(t)}))},e}(_);var D=document.getElementById("canvas");function m(t){t.width=window.innerWidth,t.height=window.innerHeight}window.addEventListener("resize",(function(){m(D),_.centerTree(D.width)})),m(D),_.centerTree(D.width);var A=new _,H=_;function C(t){A=new t}C(H),A.animate();var M=document.getElementById("insertButton"),L=document.getElementById("insertInput");function P(t,e){var n=parseFloat(t.value),o=document.getElementById("popup");isNaN(n)?o.style.display="flex":(o.style.display="none",e(n))}r(null!==M,"insertButton not found"),M.addEventListener("click",(function(){P(L,(function(t){A.insert(t)}))})),document.addEventListener("click",(function(t){var e=document.getElementById("popup");t.target!==e&&t.target!==M&&t.target!==F&&t.target!==U&&(e.style.display="none")}));var F=document.getElementById("deleteButton"),w=document.getElementById("deleteInput");r(null!==F,"deleteButton not found"),F.addEventListener("click",(function(){P(w,(function(t){A.delete(t)}))}));var U=document.getElementById("findButton"),G=document.getElementById("findInput");r(null!==U,"findButton not found"),U.addEventListener("click",(function(){P(G,(function(t){A.find(t)}))}));var b=document.getElementById("clearButton");function W(t){var e=A.getAnimationSpeedSetting(),n=A.getArrowDirection();A.stopAnimation();var o=D.getContext("2d");r(null!==o,"context is null"),o.clearRect(0,0,D.width,D.height),C(t),A.setAnimationSpeedSetting(e),A.setArrowDirection(n),A.animate()}r(null!==b,"clearButton not found"),b.addEventListener("click",(function(){W(H)}));var B=document.getElementById("arrowButton"),x=[e.PARENT_TO_CHILD,e.PREORDER,e.INORDER,e.POSTORDER],k=["Parent to Child","Preorder","Inorder","Postorder"],Q=0;r(null!==B,"arrowButton not found"),B.addEventListener("click",(function(){var t=x[Q=(Q+1)%x.length],e="Arrows: "+k[Q];B.textContent=e,A.setArrowDirection(t)}));var V=document.getElementById("animationSpeedBar");r(null!==V,"animationSpeedBar not found"),V.addEventListener("input",(function(){var t=parseInt(V.value);r(!isNaN(t),"speed must be a number"),A.setAnimationSpeedSetting(t)}));var X=document.getElementById("pauseButton"),j=!1;r(null!==X,"pauseButton not found"),X.addEventListener("click",(function(){(j=!j)?(A.stopAnimation(),h.disableElements(h.getDisableableElements()),X.textContent="Play"):(A.animate(),h.enableElements(h.getDisableableElements()),X.textContent="Pause")}));var Y=document.getElementById("treeTypeDropdown");r(null!==Y,"treeTypeDropdown not found"),Y.addEventListener("change",(function(){var t=Y.value;"bst"===t?H=_:"avl"===t&&(H=y),W(H)})),D.addEventListener("mousemove",(function(t){var e=D.getBoundingClientRect(),n=t.clientX-e.left,o=t.clientY-e.top;A.handleHover(n,o)}))})();